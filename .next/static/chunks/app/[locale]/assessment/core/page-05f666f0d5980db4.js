(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{488:function(e,s,t){Promise.resolve().then(t.bind(t,1561))},1561:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var n=t(7437),r=t(2265),a=t(9376),o=t(3949),i=t(6164);function l(e){let{question:s,children:t}=e;return(0,n.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 md:p-10",children:[(0,n.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-8",children:s}),(0,n.jsx)("div",{children:t})]})}var d=t(1186);function c(e){let{optionA:s,optionB:t,selectedOption:r,onSelect:a,disabled:o=!1}=e,{language:i}=(0,d.u7)(),l="ar"===i;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("button",{onClick:()=>a("A"),disabled:o,className:"\n          w-full p-4 md:p-6 text-left rounded-xl border-2 transition-all\n          touch-target no-select\n          ".concat(l?"text-right":"text-left","\n          ").concat("A"===r?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-700 hover:dark:border-gray-600","\n          ").concat(o?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          active:scale-[0.98] active:transition-transform\n        "),children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"\n              flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center\n              ".concat("A"===r?"border-indigo-500 bg-indigo-500":"border-gray-300 dark:border-gray-600","\n            "),children:"A"===r&&(0,n.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:l?"أ":"A"}),(0,n.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300",children:s})]})]})}),(0,n.jsx)("button",{onClick:()=>a("B"),disabled:o,className:"\n          w-full p-4 md:p-6 text-left rounded-xl border-2 transition-all\n          touch-target no-select\n          ".concat(l?"text-right":"text-left","\n          ").concat("B"===r?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20":"border-gray-200 hover:border-gray-300 dark:border-gray-700 hover:dark:border-gray-600","\n          ").concat(o?"opacity-50 cursor-not-allowed":"cursor-pointer","\n          active:scale-[0.98] active:transition-transform\n        "),children:(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"\n              flex-shrink-0 w-8 h-8 rounded-full border-2 flex items-center justify-center\n              ".concat("B"===r?"border-indigo-500 bg-indigo-500":"border-gray-300 dark:border-gray-600","\n            "),children:"B"===r&&(0,n.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:l?"ب":"B"}),(0,n.jsx)("p",{className:"mt-1 text-gray-700 dark:text-gray-300",children:t})]})]})})]})}function m(e){let{current:s,total:t,showLabel:r=!1,labelText:a}=e,{language:o}=(0,d.u7)(),i=s/t*100;return(0,n.jsxs)("div",{className:"w-full",children:[r&&a&&(0,n.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a}),(0,n.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[Math.round(i),"%"]})]}),(0,n.jsxs)("div",{className:"relative h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700"}),(0,n.jsx)("div",{className:"\n            absolute top-0 h-full bg-gradient-to-r from-indigo-500 to-indigo-600 \n            transition-all duration-500 ease-out rounded-full\n            ".concat("ar"===o?"right-0":"left-0","\n          "),style:{width:"".concat(i,"%")},children:(0,n.jsx)("div",{className:"absolute inset-0 opacity-30",children:(0,n.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-transparent via-white to-transparent animate-shimmer"})})}),(0,n.jsx)("div",{className:"absolute inset-0 flex items-center justify-between px-1",children:Array.from({length:t},(e,t)=>{let r=t<s,a=t===s-1;return(0,n.jsx)("div",{className:"\n                  w-2 h-2 rounded-full transition-all duration-300\n                  ".concat(r||a?"bg-white shadow-sm scale-110":"bg-gray-300 dark:bg-gray-600 scale-75","\n                ")},t)})})]}),(0,n.jsx)("div",{className:"mt-3 text-center",children:(0,n.jsxs)("span",{className:"text-base font-medium text-gray-700 dark:text-gray-300",children:[s," / ",t]})})]})}var u=t(5836);let g=[{id:"core_1",dimension:"E/I",questionKey:"assessment.core.q1.question",optionAKey:"assessment.core.q1.optionA",optionBKey:"assessment.core.q1.optionB",optionATendency:"E",optionBTendency:"I"},{id:"core_2",dimension:"S/N",questionKey:"assessment.core.q2.question",optionAKey:"assessment.core.q2.optionA",optionBKey:"assessment.core.q2.optionB",optionATendency:"S",optionBTendency:"N"},{id:"core_3",dimension:"T/F",questionKey:"assessment.core.q3.question",optionAKey:"assessment.core.q3.optionA",optionBKey:"assessment.core.q3.optionB",optionATendency:"T",optionBTendency:"F"},{id:"core_4",dimension:"J/P",questionKey:"assessment.core.q4.question",optionAKey:"assessment.core.q4.optionA",optionBKey:"assessment.core.q4.optionB",optionATendency:"J",optionBTendency:"P"}];function p(e){let{params:{locale:s}}=e,{t}=(0,o.$G)("common"),d=(0,a.useRouter)(),[p,x]=(0,r.useState)(0),[h,f]=(0,r.useState)(null),{sessionId:y,language:b,setLanguage:v,addResponse:j,responses:N,setProgress:k,setCurrentStep:w}=(0,i.g)();(0,r.useEffect)(()=>{v(s),w("questions")},[s,v,w]),(0,r.useEffect)(()=>{y||d.push("/".concat(s))},[y,s,d]),(0,r.useEffect)(()=>{k((p+1)/g.length*100)},[p,k]),(0,r.useEffect)(()=>{let e=g[p],s=N.find(s=>s.questionId===e.id);s?f(s.selectedOption):f(null)},[p,N]);let S=g[p],A=p===g.length-1;return y?(0,n.jsxs)("main",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800",children:[(0,n.jsx)("header",{className:"absolute top-0 right-0 p-6",children:(0,n.jsx)(u.j,{})}),(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8 md:py-16 max-w-3xl safe-bottom",children:[(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsx)(m,{current:p+1,total:g.length,showLabel:!0,labelText:t("assessment.core.progress",{current:p+1,total:g.length})})}),(0,n.jsx)(l,{question:t(S.questionKey),children:(0,n.jsx)(c,{optionA:t(S.optionAKey),optionB:t(S.optionBKey),selectedOption:h,onSelect:e=>{f(e)}})}),(0,n.jsxs)("div",{className:"mt-8 flex justify-between gap-4",children:[(0,n.jsx)("button",{onClick:()=>{p>0&&x(p-1)},disabled:0===p,className:"\n              px-4 md:px-6 py-3 rounded-lg font-medium transition-all\n              touch-target no-select flex-1 md:flex-initial\n              ".concat(0===p?"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 active:scale-[0.98]","\n            "),children:t("assessment.core.back")}),(0,n.jsx)("button",{onClick:()=>{h&&y&&(j({responseId:"resp_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),sessionId:y,questionId:S.id,questionType:"core",responseType:"binary",selectedOption:h,mbtiDimension:S.dimension,score:0,timestamp:new Date,tendency:"A"===h?S.optionATendency:S.optionBTendency}),A?(console.log("Last question completed. Navigating to interim results..."),setTimeout(()=>{d.push("/".concat(s,"/assessment/interim"))},100)):(x(p+1),f(null)))},disabled:!h,className:"\n              px-4 md:px-6 py-3 rounded-lg font-medium transition-all\n              touch-target no-select flex-1 md:flex-initial\n              ".concat(h?"bg-indigo-600 text-white hover:bg-indigo-700 active:scale-[0.98]":"bg-gray-200 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed","\n            "),children:t("assessment.core.next")})]}),!h&&(0,n.jsx)("p",{className:"text-center mt-4 text-sm text-gray-500 dark:text-gray-400",children:t("assessment.core.selectOption")})]})]}):null}},5836:function(e,s,t){"use strict";t.d(s,{j:function(){return d}});var n=t(7437),r=t(9376),a=t(1186);let o=e=>"ar"===e,i=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=o(e);return s?t?"flex-row-reverse":"flex-row":""};var l=t(2265);function d(){let e=(0,r.useRouter)(),s=(0,r.usePathname)(),{language:t,setLanguage:o}=(0,a.u7)(),[d,c]=(0,l.useState)(!1);(0,l.useEffect)(()=>{let e=localStorage.getItem("preferredLanguage");e&&e!==t&&o(e)},[t,o]);let m=async()=>{let n="en"===t?"ar":"en";c(!0);try{o(n),localStorage.setItem("preferredLanguage",n);let t=s.split("/");t[1]=n,await e.push(t.join("/"))}catch(e){console.error("Language toggle error:",e)}finally{c(!1)}},u=i(t,!0);return(0,n.jsxs)("button",{onClick:m,disabled:d,className:"\n        ".concat(u,"\n        flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 \n        hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\n        ").concat("ar"===t?"font-arabic":"font-sans","\n      "),"aria-label":"en"===t?"Switch to Arabic":"Switch to English",children:[d?(0,n.jsx)("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):(0,n.jsx)("svg",{className:"w-4 h-4 ".concat("ar"===t?"rtl-flip":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),(0,n.jsx)("span",{className:"text-sm font-medium",children:"en"===t?"العربية":"English"})]})}},6164:function(e,s,t){"use strict";t.d(s,{g:function(){return o}});var n=t(2265),r=t(1186);let a="mbti-assessment-session";function o(){let e=(0,r.u7)();return(0,n.useEffect)(()=>{let s={sessionId:e.sessionId,currentStep:e.currentStep,language:e.language,responses:e.responses,selectedFormat:e.selectedFormat,progress:e.progress,isComplete:e.isComplete};try{sessionStorage.setItem(a,JSON.stringify(s))}catch(e){console.error("Failed to save to sessionStorage:",e)}},[e.sessionId,e.currentStep,e.language,e.responses,e.selectedFormat,e.progress,e.isComplete]),(0,n.useEffect)(()=>{try{let s=sessionStorage.getItem(a);if(s){let t=JSON.parse(s);if(t.sessionId&&!e.sessionId&&(e.setSessionId(t.sessionId),e.setCurrentStep(t.currentStep),e.setLanguage(t.language),e.setSelectedFormat(t.selectedFormat),e.setProgress(t.progress),0===e.responses.length&&t.responses.length>0)){let s=t.responses.map(e=>({...e,timestamp:new Date(e.timestamp)}));e.setResponses(s)}}}catch(e){console.error("Failed to restore from sessionStorage:",e)}},[]),e}},1186:function(e,s,t){"use strict";t.d(s,{u7:function(){return l}});var n=t(9625),r=t(6885);let a={sessionId:"",currentStep:"welcome",language:"en",responses:[],selectedFormat:null,progress:0,isComplete:!1},o={theme:"light",direction:"ltr",sidebarOpen:!1,currentPage:"home"},i=(0,n.Ue)()((0,r.mW)((0,r.tJ)((e,s)=>({assessment:a,ui:o,setSessionId:s=>e(e=>({assessment:{...e.assessment,sessionId:s}})),setCurrentStep:s=>e(e=>({assessment:{...e.assessment,currentStep:s}})),setLanguage:s=>e(e=>({assessment:{...e.assessment,language:s},ui:{...e.ui,direction:"ar"===s?"rtl":"ltr"}})),addResponse:s=>e(e=>{let t;let n=e.assessment.responses.findIndex(e=>e.questionId===s.questionId);return n>=0?(t=[...e.assessment.responses])[n]=s:t=[...e.assessment.responses,s],{assessment:{...e.assessment,responses:t}}}),setResponses:s=>e(e=>({assessment:{...e.assessment,responses:s}})),setSelectedFormat:s=>e(e=>({assessment:{...e.assessment,selectedFormat:s}})),updateProgress:s=>e(e=>({assessment:{...e.assessment,progress:s}})),setProgress:s=>e(e=>({assessment:{...e.assessment,progress:s}})),completeAssessment:()=>e(e=>({assessment:{...e.assessment,isComplete:!0,currentStep:"results"}})),resetAssessment:()=>e(e=>({assessment:{...a,language:e.assessment.language}})),setInterimResults:s=>e(e=>({assessment:{...e.assessment,interimResults:s}})),setTheme:s=>e(e=>({ui:{...e.ui,theme:s}})),setDirection:s=>e(e=>({ui:{...e.ui,direction:s}})),toggleSidebar:()=>e(e=>({ui:{...e.ui,sidebarOpen:!e.ui.sidebarOpen}})),setCurrentPage:s=>e(e=>({ui:{...e.ui,currentPage:s}}))}),{name:"mbti-app-store",partialize:e=>({assessment:e.assessment,ui:{theme:e.ui.theme,direction:e.ui.direction}})}),{name:"MBTI App Store"})),l=()=>i(e=>({sessionId:e.assessment.sessionId,currentStep:e.assessment.currentStep,language:e.assessment.language,responses:e.assessment.responses,selectedFormat:e.assessment.selectedFormat,progress:e.assessment.progress,isComplete:e.assessment.isComplete,interimResults:e.assessment.interimResults,setSessionId:e.setSessionId,setCurrentStep:e.setCurrentStep,setLanguage:e.setLanguage,addResponse:e.addResponse,setResponses:e.setResponses,setSelectedFormat:e.setSelectedFormat,updateProgress:e.updateProgress,setProgress:e.setProgress,completeAssessment:e.completeAssessment,resetAssessment:e.resetAssessment,setInterimResults:e.setInterimResults}))}},function(e){e.O(0,[949,299,971,117,744],function(){return e(e.s=488)}),_N_E=e.O()}]);