(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[523],{2463:function(e,r,t){Promise.resolve().then(t.bind(t,9092))},9092:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return c}});var s=t(7437),a=t(2265),n=t(9376),i=t(3949),l=t(9098),o=t(4292);function c(e){let{params:{locale:r}}=e,{t}=(0,i.$G)("common"),c=(0,n.useRouter)(),d=(0,n.useSearchParams)(),{language:m,calculatedType:u}=(0,l.u7)(),x=d.get("mbtiType")||u,g=d.get("methodology"),p=d.get("consciousness"),h=null;if(p)try{h=JSON.parse(p)}catch(e){console.warn("Failed to parse consciousness profile from URL")}let[b,f]=(0,a.useState)([]),[y,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),w=(0,a.useRef)(null);(0,a.useEffect)(()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[b]),(0,a.useEffect)(()=>{"sais"===g&&x&&0===b.length?f([{id:"welcome-consciousness",role:"assistant",content:D(x,h),timestamp:new Date}]):!g&&x&&0===b.length&&f([{id:"welcome-standard",role:"assistant",content:"أهلاً وسهلاً! تهانينا على إتمام تقييم الشخصية وحصولك على نتيجة ".concat(x,". أنا هنا لمساعدتك في فهم شخصيتك بشكل أعمق. ما الذي تود أن تعرفه عن نمط شخصيتك؟"),timestamp:new Date}])},[g,x,h,b.length]);let D=(e,r)=>r?"\uD83C\uDF1F أهلاً وسهلاً في مساحة الوعي والتطوير الروحي! \n\nتهانينا على إتمام رحلة التقييم باستخدام منهجية SAIS واكتشاف نمط شخصيتك ".concat(e," من منظور الوعي العميق.\n\n\uD83E\uDDE0 ملفك الوعيي:\n• ").concat(r.energySourcePattern.arabicDomainName," (").concat(r.energySourcePattern.percentage,"%)\n• ").concat(r.awarenessStyle.arabicDomainName," (").concat(r.awarenessStyle.percentage,"%)  \n• ").concat(r.decisionMakingCenter.arabicDomainName," (").concat(r.decisionMakingCenter.percentage,"%)\n• ").concat(r.lifeStructurePreference.arabicDomainName," (").concat(r.lifeStructurePreference.percentage,"%)\n\nأنا مرشدك الروحي، هنا لمساعدتك في استكشاف أعماق شخصيتك وتطوير وعيك. \n\nما الجانب من وعيك تود أن نستكشفه أولاً؟"):"\uD83C\uDF1F مرحباً بك في رحلة استكشاف الوعي! تهانينا على إتمام تقييم الشخصية باستخدام منهجية SAIS وحصولك على نمط ".concat(e,". \n\nأنا مرشدك الروحي والنفسي، هنا لمساعدتك في فهم أنماط وعيك وتطوير إمكانياتك الداخلية. \n\nما الذي تود أن نستكشفه معاً في رحلة تطوير وعيك؟"),S=async()=>{if(!y.trim()||j)return;let e={id:"user-".concat(Date.now()),role:"user",content:y,timestamp:new Date};f(r=>[...r,e]),v(""),N(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:y,mbtiType:x,language:m,methodology:g,consciousnessProfile:h,conversationHistory:b.map(e=>({role:e.role,content:e.content}))})});if(!e.ok)throw Error("Failed to get response");let r=await e.json(),t={id:"assistant-".concat(Date.now()),role:"assistant",content:r.message,timestamp:new Date};f(e=>[...e,t])}catch(r){console.error("Chat error:",r);let e={id:"error-".concat(Date.now()),role:"assistant",content:"عذراً، حدث خطأ في المحادثة. يرجى المحاولة مرة أخرى.",timestamp:new Date};f(r=>[...r,e])}finally{N(!1)}},C="sais"===g?["كيف يمكنني تطوير اتصالي بمركزي الجذري العميق؟","ما هي ممارسات التأمل المناسبة لنمط شخصيتي؟","كيف يمكنني تعزيز بصيرتي الداخلية؟","ما هي طرق تطوير بوصلة قيمي الداخلية؟","كيف أحقق التناغم بين عالمي الداخلي والخارجي؟","ما هي مراحل النمو الروحي المناسبة لي؟"]:["ما هي نقاط قوتي الرئيسية؟","كيف يمكنني تطوير مهاراتي في العمل؟","ما النصائح للعلاقات الشخصية؟","كيف أتعامل مع التحديات؟"];return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50",children:(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("div",{className:"bg-white rounded-t-xl p-6 border-b border-gray-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"sais"===g?"\uD83E\uDDE0 مرشد الوعي والتطوير النفسي":"\uD83D\uDCAC مدرب الشخصية الذكي"}),x&&(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["نمط شخصيتك: ",x,"sais"===g&&" (منهجية الوعي العميق)"]})]}),(0,s.jsx)(o.z,{onClick:()=>c.back(),variant:"ghost",size:"sm",className:"text-gray-500 hover:text-gray-700",children:"← عودة للنتائج"})]})}),(0,s.jsxs)("div",{className:"bg-white h-96 overflow-y-auto p-6 border-l border-r border-gray-200",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[b.map(e=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-xs md:max-w-md lg:max-w-lg xl:max-w-xl px-4 py-3 rounded-lg ".concat("user"===e.role?"bg-blue-600 text-white":"sais"===g?"bg-gradient-to-br from-purple-100 to-indigo-100 text-gray-800":"bg-gray-100 text-gray-800"),style:{direction:"rtl"},children:[(0,s.jsx)("p",{className:"whitespace-pre-wrap leading-relaxed",children:e.content}),(0,s.jsx)("p",{className:"text-xs opacity-70 mt-2",children:e.timestamp.toLocaleTimeString("ar-SA")})]})},e.id)),j&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-100 px-4 py-3 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"animate-pulse flex space-x-1",children:[(0,s.jsx)("div",{className:"rounded-full bg-gray-400 h-2 w-2"}),(0,s.jsx)("div",{className:"rounded-full bg-gray-400 h-2 w-2"}),(0,s.jsx)("div",{className:"rounded-full bg-gray-400 h-2 w-2"})]}),(0,s.jsx)("span",{className:"text-gray-600 text-sm",children:"جاري التفكير..."})]})})})]}),(0,s.jsx)("div",{ref:w})]}),(0,s.jsxs)("div",{className:"bg-white rounded-b-xl p-6 border-t border-gray-200",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("textarea",{value:y,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),S())},placeholder:"sais"===g?"شاركني أفكارك حول رحلة الوعي...":"اسألني عن شخصيتك...",rows:2,className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",style:{direction:"rtl"},disabled:j}),(0,s.jsx)(o.z,{onClick:S,disabled:!y.trim()||j,variant:"primary",className:"sais"===g?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":"bg-blue-600 hover:bg-blue-700",children:"إرسال"})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"sais"===g?"\uD83D\uDCA1 أسئلة لاستكشاف الوعي:":"\uD83D\uDCA1 أسئلة مقترحة:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:C.slice(0,3).map((e,r)=>(0,s.jsx)("button",{onClick:()=>v(e),className:"px-3 py-2 text-xs rounded-full border transition-colors ".concat("sais"===g?"border-purple-300 text-purple-700 hover:bg-purple-50":"border-blue-300 text-blue-700 hover:bg-blue-50"),disabled:j,children:e},r))})]})]}),"sais"===g&&h&&(0,s.jsxs)("div",{className:"mt-6 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-xl p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-purple-800 mb-3",children:"\uD83C\uDF1F سياق الوعي الخاص بك"}),(0,s.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-purple-700",children:"مصدر الطاقة:"}),(0,s.jsx)("br",{}),h.energySourcePattern.arabicDomainName," (",h.energySourcePattern.percentage,"%)"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-purple-700",children:"أسلوب الإدراك:"}),(0,s.jsx)("br",{}),h.awarenessStyle.arabicDomainName," (",h.awarenessStyle.percentage,"%)"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-purple-700",children:"مركز القرار:"}),(0,s.jsx)("br",{}),h.decisionMakingCenter.arabicDomainName," (",h.decisionMakingCenter.percentage,"%)"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-purple-700",children:"تنظيم الحياة:"}),(0,s.jsx)("br",{}),h.lifeStructurePreference.arabicDomainName," ","(",h.lifeStructurePreference.percentage,"%)"]})]})]})]})})})}},4292:function(e,r,t){"use strict";t.d(r,{z:function(){return a}});var s=t(7437);let a=(0,t(2265).forwardRef)((e,r)=>{let{className:t,children:a,variant:n="primary",size:i="md",disabled:l,loading:o,onClick:c,type:d="button",...m}=e;return(0,s.jsxs)("button",{ref:r,type:d,disabled:l||o,onClick:c,className:function(){for(var e,r,t=0,s="",a=arguments.length;t<a;t++)(e=arguments[t])&&(r=function e(r){var t,s,a="";if("string"==typeof r||"number"==typeof r)a+=r;else if("object"==typeof r){if(Array.isArray(r)){var n=r.length;for(t=0;t<n;t++)r[t]&&(s=e(r[t]))&&(a&&(a+=" "),a+=s)}else for(s in r)r[s]&&(a&&(a+=" "),a+=s)}return a}(e))&&(s&&(s+=" "),s+=r);return s}("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{primary:"bg-blue-600 text-white hover:bg-blue-700",secondary:"bg-gray-600 text-white hover:bg-gray-700",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50",ghost:"text-gray-700 hover:bg-gray-100"}[n],{sm:"h-8 px-3 text-sm",md:"h-10 px-4 py-2",lg:"h-12 px-8 text-lg"}[i],t),...m,children:[o&&(0,s.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})});a.displayName="Button"}},function(e){e.O(0,[949,299,98,971,117,744],function(){return e(e.s=2463)}),_N_E=e.O()}]);