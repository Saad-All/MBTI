"use strict";exports.id=218,exports.ids=[218],exports.modules={9141:(e,s,r)=>{r.d(s,{k:()=>n});var t=r(326),a=r(9844);function n({current:e,total:s,showLabel:r=!1,labelText:n}){let{language:o}=(0,a.u7)(),l=e/s*100;return(0,t.jsxs)("div",{className:"w-full",children:[r&&n&&(0,t.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[t.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:n}),(0,t.jsxs)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[Math.round(l),"%"]})]}),(0,t.jsxs)("div",{className:"relative h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700"}),t.jsx("div",{className:`
            absolute top-0 h-full bg-gradient-to-r from-indigo-500 to-indigo-600 
            transition-all duration-500 ease-out rounded-full
            ${"ar"===o?"right-0":"left-0"}
          `,style:{width:`${l}%`},children:t.jsx("div",{className:"absolute inset-0 opacity-30",children:t.jsx("div",{className:"h-full w-full bg-gradient-to-r from-transparent via-white to-transparent animate-shimmer"})})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-between px-1",children:Array.from({length:s},(s,r)=>{let a=r<e,n=r===e-1;return t.jsx("div",{className:`
                  w-2 h-2 rounded-full transition-all duration-300
                  ${a||n?"bg-white shadow-sm scale-110":"bg-gray-300 dark:bg-gray-600 scale-75"}
                `},r)})})]}),t.jsx("div",{className:"mt-3 text-center",children:(0,t.jsxs)("span",{className:"text-base font-medium text-gray-700 dark:text-gray-300",children:[e," / ",s]})})]})}},4631:(e,s,r)=>{r.d(s,{j:()=>a});var t=r(326);function a({question:e,children:s}){return(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 md:p-10",children:[t.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-8",children:e}),t.jsx("div",{children:s})]})}},3881:(e,s,r)=>{r.d(s,{j:()=>d});var t=r(326),a=r(5047),n=r(9844);let o=e=>"ar"===e,l=(e,s=!1)=>{let r=o(e);return s?r?"flex-row-reverse":"flex-row":""};var i=r(7577);function d(){let e=(0,a.useRouter)(),s=(0,a.usePathname)(),{language:r,setLanguage:o}=(0,n.u7)(),[d,c]=(0,i.useState)(!1),u=async()=>{let t="en"===r?"ar":"en";c(!0);try{o(t),localStorage.setItem("preferredLanguage",t);let r=s.split("/");r[1]=t,await e.push(r.join("/"))}catch(e){console.error("Language toggle error:",e)}finally{c(!1)}},g=l(r,!0);return(0,t.jsxs)("button",{onClick:u,disabled:d,className:`
        ${g}
        flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-300 
        hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed
        ${"ar"===r?"font-arabic":"font-sans"}
      `,"aria-label":"en"===r?"Switch to Arabic":"Switch to English",children:[d?t.jsx("div",{className:"w-4 h-4 animate-spin rounded-full border-2 border-gray-300 border-t-gray-600"}):t.jsx("svg",{className:`w-4 h-4 ${"ar"===r?"rtl-flip":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5h12M9 3v2m1.048 9.5A18.022 18.022 0 016.412 9m6.088 9h7M11 21l5-10 5 10M12.751 5C11.783 10.77 8.07 15.61 3 18.129"})}),t.jsx("span",{className:"text-sm font-medium",children:"en"===r?"العربية":"English"})]})}},9503:(e,s,r)=>{r.d(s,{g:()=>l});var t=r(7577),a=r(9844),n=r(4885),o=r(3412);function l(){let e=(0,a.u7)(),s=(0,t.useRef)(null),r=(0,t.useRef)(!1),[l,i]=(0,t.useState)({isRestoring:!1,hasRestoredSession:!1,lastSaved:null,storageHealth:{localStorage:!1,sessionStorage:!1},errors:[]}),d=(0,t.useCallback)(()=>{if(!r.current&&e.sessionId)try{(()=>{e.persistState();let s={lastModified:new Date().toISOString(),sessionPhase:o.m.getCurrentPhase(),currentQuestionIndex:e.formatProgress?.currentQuestionIndex||0,totalQuestionsCompleted:e.coreResponses.length+e.extendedResponses.length};n.H.setItem(`${e.sessionId}-metadata`,s)})(),s.current=new Date,i(e=>({...e,lastSaved:s.current,errors:e.errors.filter(e=>!e.includes("save"))}))}catch(e){console.error("Auto-persist failed:",e),i(e=>({...e,errors:[...e.errors,"Auto-save failed"]}))}},[e]),c=(0,t.useCallback)(s=>{try{i(e=>({...e,isRestoring:!0})),r.current=!0;let t=s||`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,a=n.H.getItem(t);if(a.success&&a.data){let s=o.m.getSessionData();if(s&&o.m.isSessionExpired(s))return{success:!1,hasSession:!0,isExpired:!0};if(e.restoreFromSession(t)){o.m.validateSessionState(e)||console.warn("Session state validation failed, but continuing with recovery");let s={step:e.currentStep,questionIndex:e.formatProgress?.currentQuestionIndex||0,totalCompleted:e.coreResponses.length+e.extendedResponses.length};return i(e=>({...e,hasRestoredSession:!0,errors:e.errors.filter(e=>!e.includes("recovery"))})),{success:!0,hasSession:!0,isExpired:!1,exactPosition:s}}}return{success:!1,hasSession:!1,isExpired:!1}}catch(e){return console.error("Recovery attempt failed:",e),i(e=>({...e,errors:[...e.errors,"Recovery failed"]})),{success:!1,hasSession:!1,isExpired:!1,error:e instanceof Error?e.message:"Unknown error"}}finally{i(e=>({...e,isRestoring:!1})),r.current=!1}},[e]),u=(0,t.useCallback)(e=>c(e),[c]),g=(0,t.useCallback)(s=>{let r=s||e.sessionId;if(r)try{n.H.removeItem(r),n.H.removeItem(`${r}-metadata`),o.m.clearSessionData(),i(e=>({...e,hasRestoredSession:!1,lastSaved:null,errors:e.errors.filter(e=>!e.includes("clear"))}))}catch(e){console.error("Failed to clear session:",e),i(e=>({...e,errors:[...e.errors,"Failed to clear session"]}))}},[e.sessionId]),h=(0,t.useCallback)(()=>{d()},[d]);return{...e,persistence:{...l,recoverSession:u,clearSession:g,forceSave:h,checkStorageHealth:()=>{let e=n.H.checkStorageHealth();return i(s=>({...s,storageHealth:e})),e}}}}}};